<script>
    $( document ).ready(function() {
        if (<%= error_login %>){
            document.getElementById("openModal").click();
        }
        $("#sign_in").on('click', function() {
            $("#modal-header").text("SIGN IN");
        });
        $("#sign_up").on('click', function() {
            $("#modal-header").text("SIGN UP TO START PLAYING");
        });
    });
</script>

<%= stylesheet_link_tag 'authorization' %>

<div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold" id="modal-header">SIGN IN</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="tab-content">
        <ul class="nav nav-tabs">
          <li class="nav-item sign-tab">
            <a class="nav-link sign" id='sign_up' data-toggle="tab" href="#sign-up">I'm a new customer</a>
          </li>
          <li class="nav-item sign-tab">
            <a class="nav-link sign active" id='sign_in' data-toggle="tab" href="#sign-in">I have an account</a>
          </li>
        </ul>

        <div class="tab-content">
          <div class="tab-pane fade" id="sign-up">
            <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
              <div class="modal-body mx-3">
                <div class="md-form mb-3">
                  <%= f.text_field :name, autofocus: true, autocomplete: "name",
                                    class: 'form-control validate',
                                    placeholder: "Name", required: true %>
                </div>
                <div class="md-form mb-3">
                  <%= f.email_field :email, autofocus: true, autocomplete: "email",
                                    class: 'form-control validate',
                                    placeholder: "Email" %>
                </div>
                <div class="md-form mb-3">
                  <%= f.password_field :password, autocomplete: "current-password", minlength: 6,
                                       class: 'form-control validate',
                                       placeholder: "Password" %>
                </div>
              </div>
              <div class="modal-footer d-flex justify-content-center">
                <%= f.submit "Create Your Account", class: 'btn inp-submit' %>
              </div>
            <% end %>
          </div>

          <div class="tab-pane fade show active" id="sign-in">
            <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
              <div class="modal-body mx-3">
                <div class="md-form mb-3">
                  <%= f.email_field :email, autofocus: true, autocomplete: "email",
                                    class: 'form-control validate',
                                    placeholder: "Email" %>
                </div>
                <div class="md-form mb-3">
                  <%= f.password_field :password, autocomplete: "current-password",
                                       class: 'form-control validate',
                                       placeholder: "Password" %>
                </div>
              </div>
              <div class="modal-footer d-flex justify-content-center">
                <%= f.submit "Sign In", class: 'btn inp-submit' %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="text-center">
  <a href="" class="btn btn-secondary" data-toggle="modal" id='openModal' data-target="#modalLoginForm">Sign in</a>
</div>
